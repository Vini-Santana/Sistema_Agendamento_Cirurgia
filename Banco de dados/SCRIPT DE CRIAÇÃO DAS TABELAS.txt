CREATE DATABASE CIRURGIA;
USE CIRURGIA;

CREATE TABLE ESPECIALIZACAO (
IDESPECIALIZACAO INTEGER PRIMARY KEY auto_increment,
ESPECIALIZACAO VARCHAR(20) NOT NULL UNIQUE
);

CREATE TABLE SALA (
IDSALA INTEGER PRIMARY KEY auto_increment,
NUMEROSALA INTEGER NOT NULL
);

CREATE TABLE EQUIPAMENTOS (
IDEQUIPAMENTO INTEGER PRIMARY KEY auto_increment,
NOME VARCHAR(30) NOT NULL
);

CREATE TABLE PERFILDEACESSO (
IDPERFILDEACESSO INTEGER PRIMARY KEY auto_increment,
SENHA VARCHAR(18) NOT NULL,
USUARIO VARCHAR(20) NOT NULL UNIQUE,
NIVEL INTEGER NOT NULL
);

CREATE TABLE ENFERMEIRO (
IDENFERMEIRO INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE INSTRUMENTADOR (
IDINSTRUMENTADOR INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE ANESTESISTA (
IDANESTESISTA INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE CIRURGIAO (
IDCIRURGIAO INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE TIPO_CIRURGIA (
IDTIPO INTEGER PRIMARY KEY auto_increment,
TIPOCIRURGIA VARCHAR(40) NOT NULL,
FKESPECIALIZACAO INTEGER NOT NULL,
FOREIGN KEY(FKESPECIALIZACAO) REFERENCES ESPECIALIZACAO(IDESPECIALIZACAO)
);

CREATE TABLE ESPECIALIZACAO_CIRURGIAO (
FKCIRURGIAO INTEGER NOT NULL,
FKESPECIALIZACAO INTEGER NOT NULL,
FOREIGN KEY(FKCIRURGIAO) REFERENCES CIRURGIAO(IDCIRURGIAO),
FOREIGN KEY(FKESPECIALIZACAO) REFERENCES ESPECIALIZACAO(IDESPECIALIZACAO)
);

CREATE TABLE RECEPCIONISTA (
IDRECEPCIONISTA INTEGER PRIMARY KEY auto_increment,
NOME VARCHAR(60) NOT NULL,
DTNASCIMENTO DATE NOT NULL,
EMAIL VARCHAR(60),
FKPERFILACESSO INTEGER NOT NULL,
FOREIGN KEY(FKPERFILACESSO) REFERENCES PERFILDEACESSO(IDPERFILDEACESSO)
);

CREATE TABLE SALA_EQUIPAMENTOS (
FKSALA INTEGER NOT NULL,
FKEQUIPAMENTO INTEGER NOT NULL,
FOREIGN KEY(FKSALA) REFERENCES SALA (IDSALA),
FOREIGN KEY(FKEQUIPAMENTO) REFERENCES EQUIPAMENTOS (IDEQUIPAMENTO)
);

CREATE TABLE PACIENTE (
IDPACIENTE INTEGER PRIMARY KEY auto_increment,
NOME VARCHAR(60) NOT NULL,
DTNASCIMENTO DATE NOT NULL,
ENDERECO VARCHAR(100) NOT NULL,
NUMCARTEIRA VARCHAR(20) NOT NULL,
EMAIL VARCHAR(60),
FKRECEPCIONISTA INTEGER, 
FOREIGN KEY(FKRECEPCIONISTA) REFERENCES RECEPCIONISTA (IDRECEPCIONISTA)
);

CREATE TABLE CIRURGIA (
IDCIRURGIA INTEGER PRIMARY KEY auto_increment,
DTINICIO DATETIME NOT NULL,
DTFIM DATETIME NOT NULL,
STATUS INT NOT NULL,
FKCIRURGIAO INTEGER NOT NULL,
FKRECEPCIONISTA INTEGER NOT NULL,
FKSALA INTEGER NOT NULL,
FKTIPO INTEGER NOT NULL,
FKPACIENTE INTEGER NOT NULL,
FKINSTRUMENTADOR INTEGER NOT NULL,
FKANESTESISTA INTEGER NOT NULL,
FOREIGN KEY(FKINSTRUMENTADOR) REFERENCES INSTRUMENTADOR(IDINSTRUMENTADOR),
FOREIGN KEY(FKANESTESISTA) REFERENCES ANESTESISTA(IDANESTESISTA),
FOREIGN KEY(FKCIRURGIAO) REFERENCES CIRURGIAO(IDCIRURGIAO),
FOREIGN KEY(FKRECEPCIONISTA) REFERENCES RECEPCIONISTA(IDRECEPCIONISTA),
FOREIGN KEY(FKSALA) REFERENCES SALA(IDSALA),
FOREIGN KEY(FKTIPO) REFERENCES TIPO_CIRURGIA(IDTIPO),
FOREIGN KEY(FKPACIENTE) REFERENCES PACIENTE(IDPACIENTE)
);

CREATE TABLE TELEFONE (
IDTELEFONE INTEGER PRIMARY KEY auto_increment,
DDD NUMERIC(2) NOT NULL,
TELEFONE VARCHAR(9) NOT NULL UNIQUE,
FKENFERMEIRO INTEGER,
FKCIRURGIAO INTEGER,
FKPACIENTE INTEGER,
FKINSTRUMENTADOR INTEGER,
FKANESTESISTA INTEGER,
FKRECEPCIONISTA INTEGER,
FOREIGN KEY(FKENFERMEIRO) REFERENCES ENFERMEIRO(IDENFERMEIRO),
FOREIGN KEY(FKINSTRUMENTADOR) REFERENCES INSTRUMENTADOR(IDINSTRUMENTADOR),
FOREIGN KEY(FKANESTESISTA) REFERENCES ANESTESISTA(IDANESTESISTA),
FOREIGN KEY(FKCIRURGIAO) REFERENCES CIRURGIAO(IDCIRURGIAO), 
FOREIGN KEY(FKPACIENTE) REFERENCES PACIENTE(IDPACIENTE),
FOREIGN KEY(FKRECEPCIONISTA) REFERENCES RECEPCIONISTA(IDRECEPCIONISTA)
);

CREATE TABLE CIRURGIA_ENFERMEIRO (
FKCIRURGIA INTEGER NOT NULL,
FKENFERMEIRO INTEGER NOT NULL,
FOREIGN KEY(FKCIRURGIA) REFERENCES CIRURGIA(IDCIRURGIA),
FOREIGN KEY(FKENFERMEIRO) REFERENCES ENFERMEIRO(IDENFERMEIRO)
);