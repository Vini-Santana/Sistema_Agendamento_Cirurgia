CREATE DATABASE SGCBD;
USE SGCBD;

CREATE TABLE ESPECIALIZACAO (
IDESPECIALIZACAO INTEGER PRIMARY KEY auto_increment,
ESPECIALIZACAO VARCHAR(20) NOT NULL UNIQUE
);

CREATE TABLE SALA (
IDSALA INTEGER PRIMARY KEY auto_increment,
NUMEROSALA INTEGER NOT NULL
);

CREATE TABLE PERFILDEACESSO (
IDPERFILDEACESSO INTEGER PRIMARY KEY auto_increment,
SENHA VARCHAR(18) NOT NULL,
USUARIO VARCHAR(20) NOT NULL UNIQUE,
NIVEL INTEGER NOT NULL
);

CREATE TABLE ENFERMEIRO (
IDENFERMEIRO INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE INSTRUMENTADOR (
IDINSTRUMENTADOR INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE ANESTESISTA (
IDANESTESISTA INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE CIRURGIAO (
IDCIRURGIAO INTEGER PRIMARY KEY auto_increment,
DTNASCIMENTO DATE NOT NULL,
NOME VARCHAR(60) NOT NULL,
EMAIL VARCHAR(60)
);

CREATE TABLE TIPO_CIRURGIA (
IDTIPO INTEGER PRIMARY KEY auto_increment,
TIPOCIRURGIA VARCHAR(40) NOT NULL,
TEMPOMEDIO TIME NOT NULL,
FKESPECIALIZACAO INTEGER NOT NULL,
FOREIGN KEY(FKESPECIALIZACAO) REFERENCES ESPECIALIZACAO(IDESPECIALIZACAO)
);

CREATE TABLE ESPECIALIZACAO_CIRURGIAO (
ID INTEGER PRIMARY KEY auto_increment,    
FKCIRURGIAO INTEGER NOT NULL,
FKESPECIALIZACAO INTEGER NOT NULL,
FOREIGN KEY(FKCIRURGIAO) REFERENCES CIRURGIAO(IDCIRURGIAO),
FOREIGN KEY(FKESPECIALIZACAO) REFERENCES ESPECIALIZACAO(IDESPECIALIZACAO)
);

CREATE TABLE PACIENTE (
IDPACIENTE INTEGER PRIMARY KEY auto_increment,
NOME VARCHAR(60) NOT NULL,
DTNASCIMENTO DATE NOT NULL,
CPF VARCHAR(15) NOT NULL
);

CREATE TABLE CIRURGIA (
IDCIRURGIA INTEGER PRIMARY KEY auto_increment,
DTINICIO DATE NOT NULL,
DTFIM DATE NOT NULL,
STATUS INT NOT NULL,
HORAINICIO TIME NOT NULL,
HORAFIM TIME NOT NULL,
FKCIRURGIAO INTEGER NOT NULL,
FKSALA INTEGER NOT NULL,
FKTIPO INTEGER NOT NULL,
FKPACIENTE INTEGER NOT NULL,
FKINSTRUMENTADOR INTEGER NOT NULL,
FKANESTESISTA INTEGER NOT NULL,
FOREIGN KEY(FKCIRURGIAO) REFERENCES CIRURGIAO(IDCIRURGIAO),
FOREIGN KEY(FKSALA) REFERENCES SALA(IDSALA),
FOREIGN KEY(FKTIPO) REFERENCES TIPO_CIRURGIA(IDTIPO),
FOREIGN KEY(FKPACIENTE) REFERENCES PACIENTE(IDPACIENTE),
FOREIGN KEY(FKINSTRUMENTADOR) REFERENCES INSTRUMENTADOR(IDINSTRUMENTADOR),
FOREIGN KEY(FKANESTESISTA) REFERENCES ANESTESISTA(IDANESTESISTA)
);

CREATE TABLE CIRURGIA_ENFERMEIRO (
FKCIRURGIA INTEGER NOT NULL,
FKENFERMEIRO INTEGER NOT NULL,
FOREIGN KEY(FKCIRURGIA) REFERENCES CIRURGIA(IDCIRURGIA),
FOREIGN KEY(FKENFERMEIRO) REFERENCES ENFERMEIRO(IDENFERMEIRO)
);